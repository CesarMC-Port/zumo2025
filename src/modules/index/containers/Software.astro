---
---

<section id="programacion" class="py-20 px-6">
  <div class="w-full md:w-[47%]">
    <div class="mb-12">
      <span class="text-primary font-tech text-sm tracking-widest uppercase">03. Documentación</span>
      <h2 class="text-5xl font-bold font-tech mt-4 mb-6">Programación y Lógica</h2>
      <p class="text-gray-400 text-lg">
        Algoritmos de control autónomo con estrategias adaptativas y respuesta en tiempo real.
      </p>
    </div>

    <div class="grid gap-6">
      <div class="max-w-[330px] md:max-w-[1000px] bg-dark-card border border-gray-800 rounded-xl p-6 hover:border-primary transition-all duration-300">
        <h3 class="text-xl font-tech font-semibold mb-4 text-primary">Estrategia de Ataque</h3>
        <p class="text-gray-400 mb-4">
          El robot implementa un sistema de búsqueda en espiral y ataque directo cuando detecta al oponente.
        </p>
        <div class="bg-dark rounded-lg overflow-hidden border border-gray-800">
          <div class="bg-gray-900 px-4 py-2 text-xs text-gray-500 border-b border-gray-800">
            main.cpp
          </div>
<pre class="p-4 overflow-x-auto text-sm"><code class="language-cpp">
<span class="text-purple-400">void</span> <span class="text-blue-400">estrategia</span>() {'{'}<br />
&nbsp;&nbsp;<span class="text-gray-500">// --- PRIORIDAD 1: ZONA DE ATAQUE ---</span><br />
&nbsp;&nbsp;<span class="text-purple-400">if</span> (distanciaFrente &lt; distanciaAtaque) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"Oponente en zona de ataque. ¡EMPUJAR!"</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;ultimaDireccionVista = FRENTE;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">adelante</span>(velocidadAtaque);<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-gray-500">// Cuando atacamos de frente, no necesitamos actualizar la memoria de búsqueda.</span><br />
&nbsp;&nbsp;{'}'}<br />
<br />
&nbsp;&nbsp;<span class="text-gray-500">// --- PRIORIDAD 2: ZONA DE DETECCIÓN ---</span><br />
&nbsp;&nbsp;<span class="text-purple-400">else if</span> (distanciaFrente &lt; distanciaDeteccion) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"Oponente al frente. Aproximando..."</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;ultimaDireccionVista = FRENTE;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">adelante</span>(velocidadBusqueda);<br />
&nbsp;&nbsp;{'}'}<br />
<br />
&nbsp;&nbsp;<span class="text-purple-400">else if</span> (distanciaIzquierda &lt; distanciaDerecha &amp;&amp; distanciaIzquierda &lt; distanciaDeteccion) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"Oponente detectado a la IZQUIERDA. Girando..."</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;ultimaDireccionVista = IZQUIERDA; <span class="text-gray-500">// ¡Guardamos que lo vimos a la izquierda!</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">girarIzquierda</span>(velocidadBusqueda);<br />
&nbsp;&nbsp;{'}'}<br />
<br />
&nbsp;&nbsp;<span class="text-purple-400">else if</span> (distanciaDerecha &lt; distanciaIzquierda &amp;&amp; distanciaDerecha &lt; distanciaDeteccion) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"Oponente detectado a la DERECHA. Girando..."</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;ultimaDireccionVista = DERECHA; <span class="text-gray-500">// ¡Guardamos que lo vimos a la derecha!</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">girarDerecha</span>(velocidadBusqueda);<br />
&nbsp;&nbsp;{'}'}<br />
<br />
&nbsp;&nbsp;<span class="text-gray-500">// --- PRIORIDAD 3: ESTRATEGIA DE BÚSQUEDA CON MEMORIA ---</span><br />
&nbsp;&nbsp;<span class="text-purple-400">else</span> {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-gray-500">// Si no vemos a nadie, usamos nuestra memoria.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">print</span>(<span class="text-yellow-300">"Oponente perdido. Buscando en la última dirección vista: "</span>);<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (ultimaDireccionVista == DERECHA) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"DERECHA"</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">girarDerecha</span>(velocidadBusqueda); <span class="text-gray-500">// Seguir girando a la derecha.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{'}'}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">else if</span> (ultimaDireccionVista == IZQUIERDA) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"IZQUIERDA"</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">girarIzquierda</span>(velocidadBusqueda); <span class="text-gray-500">// Seguir girando a la izquierda.</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;{'}'}<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">else</span> {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-gray-500">// Esto solo ocurre al principio del combate (ultimaDireccionVista == NINGUNA)</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"INICIANDO BÚSQUEDA (por defecto a la derecha)"</span>);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span>(direccionGiroBusqueda == DERECHA) {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">girarDerecha</span>(velocidadBusqueda);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'} <span class="text-purple-400">else</span> {'{'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">girarIzquierda</span>(velocidadBusqueda);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{'}'}<br />
&nbsp;&nbsp;&nbsp;&nbsp;{'}'}<br />
&nbsp;&nbsp;{'}'}<br />
{'}'}
</code></pre>
        </div>
      </div>

      <div class="max-w-[330px] md:max-w-[1000px] bg-dark-card border border-gray-800 rounded-xl p-6 hover:border-primary transition-all duration-300">
        <h3 class="text-xl font-tech font-semibold mb-4 text-primary">Control de Motores (PWM)</h3>
        <p class="text-gray-400 mb-4">
          Sistema de control con modulación por ancho de pulso para velocidad variable y maniobras precisas.
        </p>
        <div class="bg-dark rounded-lg overflow-hidden border border-gray-800">
          <div class="bg-gray-900 px-4 py-2 text-xs text-gray-500 border-b border-gray-800">
            motor_control.cpp
          </div>
<pre class="p-4 overflow-x-auto text-sm"><code class="language-cpp"><span class="text-purple-400">void</span> <span class="text-blue-400">adelante</span>(<span class="text-purple-400">int</span> velocidad) {'{'}<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN1_PIN, <span class="text-green-400">HIGH</span>);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN2_PIN, <span class="text-green-400">LOW</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_IZQ_PWM_PIN, velocidad);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN1_PIN, <span class="text-green-400">HIGH</span>);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN2_PIN, <span class="text-green-400">LOW</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_DER_PWM_PIN, velocidad);<br />
{'}'}<br />
<br />
<span class="text-purple-400">void</span> <span class="text-blue-400">atras</span>(<span class="text-purple-400">int</span> velocidad) {'{'}<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN1_PIN, <span class="text-green-400">LOW</span>);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN2_PIN, <span class="text-green-400">HIGH</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_IZQ_PWM_PIN, velocidad);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN1_PIN, <span class="text-green-400">LOW</span>);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN2_PIN, <span class="text-green-400">HIGH</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_DER_PWM_PIN, velocidad);<br />
{'}'}<br />
<br />
<span class="text-purple-400">void</span> <span class="text-blue-400">girarDerecha</span>(<span class="text-purple-400">int</span> velocidad) {'{'}<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN1_PIN, <span class="text-green-400">LOW</span>); <span class="text-gray-500">// Motor Izquierdo: Atrás</span><br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN2_PIN, <span class="text-green-400">HIGH</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_IZQ_PWM_PIN, velocidad);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN1_PIN, <span class="text-green-400">HIGH</span>); <span class="text-gray-500">// Motor Derecho: Adelante</span><br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN2_PIN, <span class="text-green-400">LOW</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_DER_PWM_PIN, velocidad);<br />
{'}'}<br />
<br />
<span class="text-purple-400">void</span> <span class="text-blue-400">girarIzquierda</span>(<span class="text-purple-400">int</span> velocidad) {'{'}<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN1_PIN, <span class="text-green-400">HIGH</span>); <span class="text-gray-500">// Motor Izquierdo: Adelante</span><br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_IZQ_IN2_PIN, <span class="text-green-400">LOW</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_IZQ_PWM_PIN, velocidad);<br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN1_PIN, <span class="text-green-400">LOW</span>); <span class="text-gray-500">// Motor Derecho: Atrás</span><br />
  <span class="text-blue-400">digitalWrite</span>(MOTOR_DER_IN2_PIN, <span class="text-green-400">HIGH</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_DER_PWM_PIN, velocidad);<br />
{'}'}<br />
<br />
<span class="text-purple-400">void</span> <span class="text-blue-400">parar</span>() {'{'}<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_IZQ_PWM_PIN, <span class="text-green-400">0</span>);<br />
  <span class="text-blue-400">analogWrite</span>(MOTOR_DER_PWM_PIN, <span class="text-green-400">0</span>);<br />
{'}'}</code></pre>
        </div>
      </div>

      <div class="max-w-[330px] md:max-w-[1000px] bg-dark-card border border-gray-800 rounded-xl p-6 hover:border-primary transition-all duration-300">
        <h3 class="text-xl font-tech font-semibold mb-4 text-primary">Detección de Línea</h3>
        <p class="text-gray-400 mb-4">
          Los sensores infrarrojos detectan el borde del ring y activan maniobras evasivas para evitar salir del área de combate.
        </p>
        <div class="bg-dark rounded-lg overflow-hidden border border-gray-800">
          <div class="bg-gray-900 px-4 py-2 text-xs text-gray-500 border-b border-gray-800">
            sensors.cpp
          </div>
<pre class="p-4 overflow-x-auto text-sm"><code class="language-cpp"><span class="text-purple-400">void</span> <span class="text-blue-400">estrategiaLinea</span>() {'{'}<br />
  <span class="text-purple-400">static unsigned long</span> inicioManiobra = <span class="text-green-400">0</span>;<br />
  <span class="text-purple-400">static bool</span> enManiobra = <span class="text-green-400">false</span>;<br />
<br />
  <span class="text-gray-500">// Iniciar maniobra solo la primera vez que se detecta línea</span><br />
  <span class="text-purple-400">if</span> (!enManiobra) {'{'}<br />
    enManiobra = <span class="text-green-400">true</span>;<br />
    inicioManiobra = <span class="text-blue-400">millis</span>();<br />
  {'}'}<br />
<br />
  <span class="text-purple-400">unsigned long</span> tiempo = <span class="text-blue-400">millis</span>() - inicioManiobra;<br />
  <span class="text-gray-500">// --- Limitar duración total de maniobra (1.6 segundos) ---</span><br />
  <span class="text-purple-400">if</span> (tiempo &gt; <span class="text-green-400">1600</span>) {'{'}<br />
    <span class="text-blue-400">parar</span>();<br />
    girando = <span class="text-green-400">false</span>;<br />
    enManiobra = <span class="text-green-400">false</span>;<br />
    ultimaLineaNegraVista = NINGUNA;<br />
    <span class="text-purple-400">return</span>;<br />
  {'}'}<br />
<br />
  <span class="text-gray-500">// --- CASO 1: línea trasera detectada ---</span><br />
  <span class="text-purple-400">if</span> (ultimaLineaNegraVista == TRASERO) {'{'}<br />
    <span class="text-blue-400">Serial</span>.<span class="text-blue-400">println</span>(<span class="text-yellow-300">"Adentro"</span>);<br />
    <span class="text-purple-400">if</span> (tiempo &lt; <span class="text-green-400">1500</span>) {'{'}<br />
      <span class="text-gray-500">// 600–1500 ms → avanza fuerte para volver al centro</span><br />
      <span class="text-blue-400">adelante</span>(<span class="text-green-400">255</span>);<br />
    {'}'} <span class="text-purple-400">else</span> {'{'}<br />
      <span class="text-blue-400">parar</span>();<br />
      enManiobra = <span class="text-green-400">false</span>;<br />
      girando = <span class="text-green-400">false</span>;<br />
      ultimaLineaNegraVista = NINGUNA;<br />
    {'}'}<br />
  {'}'}<br />
<br />
  <span class="text-gray-500">// --- CASO 2: línea al frente derecha ---</span><br />
  <span class="text-purple-400">else if</span> (ultimaLineaNegraVista == FRENTE_DERECHA) {'{'}<br />
    <span class="text-blue-400">atras</span>(<span class="text-green-400">255</span>);<br />
    direccionGiroBusqueda = IZQUIERDA;<br />
    <span class="text-purple-400">if</span> (tiempo &gt; <span class="text-green-400">800</span>) {'{'}<br />
      <span class="text-blue-400">parar</span>();<br />
      enManiobra = <span class="text-green-400">false</span>;<br />
      girando = <span class="text-green-400">false</span>;<br />
      ultimaLineaNegraVista = NINGUNA;<br />
    {'}'}<br />
  {'}'}<br />
<br />
  <span class="text-gray-500">// --- CASO 3: línea al frente izquierda o ambos sensores frontales ---</span><br />
  <span class="text-purple-400">else if</span> (ultimaLineaNegraVista == FRENTE_IZQUIERDA || ultimaLineaNegraVista == FRENTE_COMPLETO) {'{'}<br />
    <span class="text-blue-400">atras</span>(<span class="text-green-400">255</span>);<br />
    direccionGiroBusqueda = DERECHA;<br />
    <span class="text-purple-400">if</span> (tiempo &gt; <span class="text-green-400">800</span>) {'{'}<br />
      <span class="text-blue-400">parar</span>();<br />
      enManiobra = <span class="text-green-400">false</span>;<br />
      girando = <span class="text-green-400">false</span>;<br />
      ultimaLineaNegraVista = NINGUNA;<br />
    {'}'}<br />
  {'}'}<br />
<br />
  <span class="text-gray-500">// --- CASO 4: sin línea detectada ---</span><br />
  <span class="text-purple-400">else</span> {'{'}<br />
    enManiobra = <span class="text-green-400">false</span>;<br />
    girando = <span class="text-green-400">false</span>;<br />
  {'}'}<br />
{'}'}</code></pre>
        </div>
      </div>

      <div class="max-w-[330px] md:max-w-[1000px] bg-dark-card border border-gray-800 rounded-xl p-6 hover:border-primary transition-all duration-300">
        <h3 class="text-xl font-tech font-semibold mb-3 text-primary">Características del Código</h3>
       
      </div>
    </div>
  </div>
</section>
